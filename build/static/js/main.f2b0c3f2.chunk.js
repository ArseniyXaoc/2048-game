(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{15:function(e,t,c){},17:function(e,t,c){},21:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(10),s=c.n(a),o=(c(15),c(3)),l=c(0),i=function(e){var t=e.score;return Object(l.jsx)("nav",{children:Object(l.jsxs)("div",{className:"nav-wrapper",children:[Object(l.jsx)("a",{href:"/",className:"center brand-logo",children:"2048 Game"}),Object(l.jsxs)("p",{className:"left on-med-and-down score",children:["Score:",Object(l.jsx)("span",{children:t})]}),Object(l.jsxs)("ul",{className:"right hide-on-med-and-down",children:[Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"",children:"First"})}),Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"",children:"Second"})})]})]})})},j=c(7),u=(c(17),function(e){var t=e.x,c=e.y,n=e.value,r=10*(Math.log2(n)-1),a=100*t,s=100*c;return Object(l.jsx)("div",{className:"field-cells",style:{transform:"translate(".concat(a,"px, ").concat(s,"px)"),backgroundColor:"hsl(0, ".concat(r,"%, 68%)")},children:n})}),d=function(e){var t=e.cells;return Object(l.jsxs)("div",{className:"field",children:[Object(l.jsx)(f,{}),t.map((function(e){return Object(l.jsx)(u,{x:e.x,y:e.y,value:e.value},e.id)}))]})},f=function(){for(var e=[],t=0;t<16;t++)e.push(Object(l.jsx)("div",{className:"background-cells"},t));return Object(l.jsx)(l.Fragment,{children:e})},b=c(2),O="UP",h="DOWN",v="LEFT",x="RIGHT",m="IDLE",g="MOVING",y="REMOVE",S="ENLARGE",p=function(e,t,c,n,r){return{x:e,y:t,value:c,id:n,cellState:r}},N=function(){return p(Object(b.random)(0,3),Object(b.random)(0,3),2,Object(b.uniqueId)(),m)},w=function(){var e=N(),t=N();return e.x===t.x&&e.y===t.y&&(t.y=0===t.y?1:t.y-1),[e,t]},I=c(4),E=function(e,t){var c=Object(b.cloneDeep)(e),n=Array.from({length:4},(function(){return new Array(4).fill(0)}));c.forEach((function(e){n[e.y][e.x]=e}));var r=!1,a=function(e,t){switch(e){case"DOWN":t=Object(I.rotate)(t,180);break;case"RIGHT":t=r?Object(I.rotate)(t,90):Object(I.rotate)(t,-90);break;case"LEFT":t=r?Object(I.rotate)(t,-90):Object(I.rotate)(t,90)}return r=!0,t};function s(e,t,c){for(var n=c-1;n>=0;){if(e[n][t]){if(e[n][t].value!==e[c][t].value||e[n][t].cellState!==m&&e[n][t].cellState!==g)break;e[n][t].cellState=y,e[c][t].cellState=S,e[n][t]=e[c][t],e[c][t]=0,c=n}else e[n][t]=e[c][t],e[c][t].cellState=g,e[c][t]=0,c=n;n-=1}}n="UP"===t?n:a(t,n);for(var o=0;o<4;o+=1)for(var l=0;l<4;l+=1)0!==n[o][l]&&s(n,l,o);return function(e){for(var t=e,c=0;c<4;c+=1)for(var n=0;n<4;n+=1)0!==e[c][n]&&(t[c][n].y=c,t[c][n].x=n)}(n="UP"===t?n:a(t,n)),c};var k={ArrowLeft:v,ArrowRight:x,ArrowUp:O,ArrowDown:h,KeyA:v,KeyD:x,KeyW:O,KeyS:h},A=function(e){var t=e.setScore,c=e.score,r=JSON.parse(localStorage.getItem("myCells")),a=JSON.parse(localStorage.getItem("myScore")),s=Object(n.useState)(w()),i=Object(o.a)(s,2),u=i[0],f=i[1];r&&(console.log(r),Object(n.useEffect)((function(){f((function(e){return Object(j.a)(r)})),t(a)}),[]));var O=Object(n.useState)("Start"),v=Object(o.a)(O,2),g=v[0],N=v[1],I=Object(n.useState)(),A=Object(o.a)(I,2),L=(A[0],A[1],function(e){F(e,"")});function F(e,c){f((function(t){return E(t,e?k[e.code]:c)})),f((function(e){return function(e){return e.filter((function(e){return e.cellState!==y})).map((function(e){return e.cellState===S&&(e.value*=2,2048===e.value&&alert("You Win!")),e.cellState=m,e}))}(e)})),f((function(e){return function(e){var t,c,n=new Set;if(e.forEach((function(e){n.add(4*e.x+e.y)})),16===n.size)return e;var r=n.size;do{var a=4*(t=Object(b.random)(0,3))+(c=Object(b.random)(0,3));n.add(a)}while(r===n.size);var s=Object(b.random)(0,9);return[].concat(Object(j.a)(e),[p(t,c,s<=7?2:4,Object(b.uniqueId)(),"IDLE")])}(e)})),t((function(e){return e+2}))}return Object(n.useEffect)((function(){return document.addEventListener("keydown",L),function(){document.removeEventListener("keydown",L)}}),[]),Object(n.useEffect)((function(){!function(e,t){var c=JSON.stringify(e);localStorage.setItem("myCells",c);var n=JSON.stringify(t);localStorage.setItem("myScore",n),console.log(r)}(u,c)})),Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"waves-effect waves-light btn",onClick:function(){f((function(e){return w()})),t(0)},children:"New Game"}),Object(l.jsxs)("button",{className:"waves-effect waves-light btn",onClick:function(){"Start"===g?N("Stop"):(N("Stop"),console.log(undefined),clearInterval()),function(e){var t,c;"Start"===e?(t=setInterval((function(){F(null,x)}),500),c=setInterval((function(){F(null,h)}),500)):(clearInterval(t),clearInterval(c))}(g)},children:["Autoplay ",g]}),Object(l.jsx)(d,{cells:u})]})},L=c.p+"static/media/rs_school.b974d406.svg",F=function(){return Object(l.jsxs)("footer",{className:"page-footer",style:{position:"fixed",bottom:0,left:0,width:"100%"},children:[Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col l6 s12",children:Object(l.jsx)("h5",{className:"white-text",children:"2048 GAME"})}),Object(l.jsx)("div",{className:"col l4 offset-l2 s12",children:Object(l.jsx)("ul",{children:Object(l.jsx)("li",{children:Object(l.jsx)("a",{className:"grey-text text-lighten-3",href:"https://github.com/ArseniyXaoc",children:"Github"})})})})]})}),Object(l.jsx)("div",{className:"footer-copyright",children:Object(l.jsxs)("div",{className:"container",children:["\xa9 2020 RS Scool Arseniy Buryachek",Object(l.jsxs)("a",{className:"grey-text text-lighten-4 right",target:"_blank",href:"https://rs.school/",children:[Object(l.jsx)("img",{src:L,alt:""}),"rs.school"]})]})})]})},C=function(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),c=t[0],r=t[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("header",{children:Object(l.jsx)(i,{score:c})}),Object(l.jsxs)("main",{children:[Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("h1",{})}),Object(l.jsx)(A,{setScore:r,score:c})]}),Object(l.jsx)(F,{})]})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,22)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};c(19),c(20);s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),D()}},[[21,1,2]]]);
//# sourceMappingURL=main.f2b0c3f2.chunk.js.map