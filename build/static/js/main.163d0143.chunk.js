(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{15:function(e,t,c){},17:function(e,t,c){},21:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(9),s=c.n(a),l=(c(15),c(3)),o=c(0),i=function(e){var t=e.score;return Object(o.jsx)("nav",{children:Object(o.jsxs)("div",{className:"nav-wrapper",children:[Object(o.jsx)("a",{href:"/",className:"center brand-logo",children:"2048 Game"}),Object(o.jsxs)("p",{className:"left on-med-and-down score",children:["Score:",Object(o.jsx)("span",{children:t})]}),Object(o.jsxs)("ul",{className:"right hide-on-med-and-down",children:[Object(o.jsx)("li",{children:Object(o.jsx)("a",{href:"",children:"First"})}),Object(o.jsx)("li",{children:Object(o.jsx)("a",{href:"",children:"Second"})})]})]})})},j=(c(17),function(e){var t=e.x,c=e.y,n=e.value,r=10*(Math.log2(n)-1),a=100*t,s=100*c;return Object(o.jsx)("div",{className:"field-cells",style:{transform:"translate(".concat(a,"px, ").concat(s,"px)"),backgroundColor:"hsl(0, ".concat(r,"%, 68%)")},children:n})}),u=function(e){var t=e.cells;return Object(o.jsxs)("div",{className:"field",children:[Object(o.jsx)(d,{}),t.map((function(e){return Object(o.jsx)(j,{x:e.x,y:e.y,value:e.value},e.id)}))]})},d=function(){for(var e=[],t=0;t<16;t++)e.push(Object(o.jsx)("div",{className:"background-cells"},t));return Object(o.jsx)(o.Fragment,{children:e})},f=c(2),b="UP",h="DOWN",O="LEFT",v="RIGHT",x="IDLE",m="MOVING",y="REMOVE",g="ENLARGE",S=function(e,t,c,n,r){return{x:e,y:t,value:c,id:n,cellState:r}},p=function(){return S(Object(f.random)(0,3),Object(f.random)(0,3),2,Object(f.uniqueId)(),x)},N=function(){var e=p(),t=p();return e.x===t.x&&e.y===t.y&&(t.y=0===t.y?1:t.y-1),[e,t]},w=c(4),I=function(e,t){var c=Object(f.cloneDeep)(e),n=Array.from({length:4},(function(){return new Array(4).fill(0)}));c.forEach((function(e){n[e.y][e.x]=e}));var r=!1,a=function(e,t){switch(e){case"DOWN":t=Object(w.rotate)(t,180);break;case"RIGHT":t=r?Object(w.rotate)(t,90):Object(w.rotate)(t,-90);break;case"LEFT":t=r?Object(w.rotate)(t,-90):Object(w.rotate)(t,90)}return r=!0,t};function s(e,t,c){for(var n=c-1;n>=0;){if(e[n][t]){if(e[n][t].value!==e[c][t].value||e[n][t].cellState!==x&&e[n][t].cellState!==m)break;e[n][t].cellState=y,e[c][t].cellState=g,e[n][t]=e[c][t],e[c][t]=0,c=n}else e[n][t]=e[c][t],e[c][t].cellState=m,e[c][t]=0,c=n;n-=1}}n="UP"===t?n:a(t,n);for(var l=0;l<4;l+=1)for(var o=0;o<4;o+=1)0!==n[l][o]&&s(n,o,l);return function(e){for(var t=e,c=0;c<4;c+=1)for(var n=0;n<4;n+=1)0!==e[c][n]&&(t[c][n].y=c,t[c][n].x=n)}(n="UP"===t?n:a(t,n)),c};var E=c(10);var k={ArrowLeft:O,ArrowRight:v,ArrowUp:b,ArrowDown:h,KeyA:O,KeyD:v,KeyW:b,KeyS:h},A=function(e){var t=e.setScore,c=(e.score,Object(n.useState)(N())),r=Object(l.a)(c,2),a=r[0],s=r[1],i=Object(n.useState)("Start"),j=Object(l.a)(i,2),d=j[0],b=j[1],O=Object(n.useState)(),m=Object(l.a)(O,2),p=(m[0],m[1],function(e){w(e,"")});function w(e,c){s((function(t){return I(t,e?k[e.code]:c)})),s((function(e){return function(e){return e.filter((function(e){return e.cellState!==y})).map((function(e){return e.cellState===g&&(e.value*=2,2048===e.value&&alert("You Win!")),e.cellState=x,e}))}(e)})),s((function(e){return function(e){var t,c,n=new Set;if(e.forEach((function(e){n.add(4*e.x+e.y)})),16===n.size)return e;var r=n.size;do{var a=4*(t=Object(f.random)(0,3))+(c=Object(f.random)(0,3));n.add(a)}while(r===n.size);var s=Object(f.random)(0,9);return[].concat(Object(E.a)(e),[S(t,c,s<=7?2:4,Object(f.uniqueId)(),"IDLE")])}(e)})),t((function(e){return e+2}))}return Object(n.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}}),[]),Object(n.useEffect)((function(){!function(e,t){var c=JSON.stringify(e);localStorage.setItem("myCells",c);var n=JSON.stringify(e);localStorage.setItem("myCells",n);var r=JSON.parse(localStorage.getItem("myCells"));console.log(r)}(a)})),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"waves-effect waves-light btn",onClick:function(){s((function(e){return N()})),t(0)},children:"New Game"}),Object(o.jsxs)("button",{className:"waves-effect waves-light btn",onClick:function(){"Start"===d?b("Stop"):(b("Stop"),console.log(undefined),clearInterval()),function(e){var t,c;"Start"===e?(t=setInterval((function(){w(null,v)}),500),c=setInterval((function(){w(null,h)}),500)):(clearInterval(t),clearInterval(c))}(d)},children:["Autoplay ",d]}),Object(o.jsx)(u,{cells:a})]})},L=c.p+"static/media/rs_school.b974d406.svg",C=function(){return Object(o.jsxs)("footer",{className:"page-footer",style:{position:"fixed",bottom:0,left:0,width:"100%"},children:[Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col l6 s12",children:Object(o.jsx)("h5",{className:"white-text",children:"2048 GAME"})}),Object(o.jsx)("div",{className:"col l4 offset-l2 s12",children:Object(o.jsx)("ul",{children:Object(o.jsx)("li",{children:Object(o.jsx)("a",{className:"grey-text text-lighten-3",href:"https://github.com/ArseniyXaoc",children:"Github"})})})})]})}),Object(o.jsx)("div",{className:"footer-copyright",children:Object(o.jsxs)("div",{className:"container",children:["\xa9 2020 RS Scool Arseniy Buryachek",Object(o.jsxs)("a",{className:"grey-text text-lighten-4 right",target:"_blank",href:"https://rs.school/",children:[Object(o.jsx)("img",{src:L,alt:""}),"rs.school"]})]})})]})},F=function(){var e=Object(n.useState)(1),t=Object(l.a)(e,2),c=t[0],r=t[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("header",{children:Object(o.jsx)(i,{score:c})}),Object(o.jsxs)("main",{children:[Object(o.jsx)("div",{className:"containet",children:Object(o.jsx)("h1",{children:"Test"})}),Object(o.jsx)(A,{setScore:r,score:c})]}),Object(o.jsx)(C,{})]})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,22)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};c(19),c(20);s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(F,{})}),document.getElementById("root")),D()}},[[21,1,2]]]);
//# sourceMappingURL=main.163d0143.chunk.js.map